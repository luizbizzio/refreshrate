<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  
  <title>Refresh Rate Test</title>
  
  <link rel="canonical" href="https://refreshrate.app/">

  <link rel="stylesheet" href="css/main.css"> 
  
  <meta name="robots" content="index, follow">
  <meta name="description" content="RefreshRate.app offers real-time monitoring and analysis of your screen's refresh rate and system performance metrics, helping you optimize your display settings for the smoothest visual experience.">
  <meta name="keywords" content="RefreshRate.app, screen refresh rate, refresh rate test, refresh rate check, real-time monitoring, system performance, performance metrics, display optimization, FPS, FPS monitoring, Frames per Second, frame rate analysis, Frame Duration, Refresh Rate, Pixels per Frame, Pixels per Second, Aspect Ratio, Screen Resolution, System Scale, Screen Orientation, Bit Depth, Color Space, Portrait, Landscape, 10-bit, 8-bit, SDR, HDR, system analytics, screen performance, real-time analysis, performance dashboard, system optimization, screen smoothness, real-time metrics, performance tracker, display settings optimization, real-time screen analysis, performance monitoring tool, system diagnostics">

  <meta name="author" content="Luiz Bizzio">

  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">

  <link rel="icon" href="favicon.ico" sizes="any">
  <link rel="icon" href="icon.svg" type="image/svg+xml">
  <link rel="apple-touch-icon" href="icon.png">
  <link rel="manifest" href="manifest.webmanifest">

  <meta property="og:title" content="Refresh Rate Test">
  <meta property="og:description" content="RefreshRate.app offers real-time monitoring and analysis of your screen's refresh rate and system performance metrics, helping you optimize your display settings for the smoothest visual experience.">
  <meta property="og:url" content="https://refreshrate.app">
  <meta property="og:type" content="website">
  <meta property="og:image" content="https://refreshrate.app/icon.png">
  <meta property="og:image:width" content="1600">
  <meta property="og:image:height" content="1600">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Refresh Rate Test">
  <meta name="twitter:description" content="RefreshRate.app offers real-time monitoring and analysis of your screen's refresh rate and system performance metrics, helping you optimize your display settings for the smoothest visual experience.">
  <meta name="twitter:image" content="https://refreshrate.app/icon.png">
  
  <meta name="theme-color" content="#2d2d2d">
  <meta name="msapplication-navbutton-color" content="#2d2d2d">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "url": "https://refreshrate.app",
      "name": "RefreshRate.app",
      "description": "RefreshRate.app offers real-time monitoring and analysis of your screen's refresh rate and system performance metrics, helping you optimize your display settings for the smoothest visual experience."
    }
  </script>
  
</head>
<body>

  <button id="fullscreen-button">Enter Fullscreen</button>
  <h1>Refresh Rate</h1>

  <div id="animations-container">
    <div class="animation-box" id="animation-square"></div>
    <div class="animation-box" id="animation-triangle"></div>
    <div class="animation-box" id="animation-rectangle"></div>
    <div class="animation-box" id="animation-pulse"></div>
    <div class="animation-box" id="animation-color"></div>
  </div>

  <div id="one-ms-container">
    <div id="one-ms-ball"></div>
  </div>

  <p id="ghost-count">üëª Ghost Count: 0</p>

  <p id="ball-info">
    The more times you see this ball simultaneously on your screen, the smoother your monitor‚Äôs refresh rate is.
  </p>
  
  <div id="controls">
    <label>
      Background Color:
      <input type="color" id="background-color" value="#2d2d2d">
    </label>
    <label>
      Decimals:
      <select id="decimal-places">
        <option value="1">1</option>
        <option value="2" selected>2</option>
        <option value="3">3</option>
      </select>
    </label>
    <label>
      Update Interval:
      <select id="update-interval">
        <option value="50">50 ms</option>
        <option value="100" selected>100 ms</option>
        <option value="250">250 ms</option>
        <option value="500">500 ms</option>
        <option value="1000">1000 ms</option>
      </select>
    </label>
  </div>

  <div id="warning">‚ö†Ô∏è This browser window is not on the primary monitor!</div>

  <table>
    <tr>
      <th>Parameter</th>
      <th>Value</th>
    </tr>
    <tr>
      <td>FPS (Frames per Second)</td>
      <td id="fps">Calculating...</td>
    </tr>
    <tr>
      <td>Frame Duration (ms)</td>
      <td id="frame-duration">Calculating...</td>
    </tr>
    <tr>
      <td>Refresh Rate (Hz)</td>
      <td id="refresh-rate">Calculating...</td>
    </tr>
    <tr>
      <td>Pixels per Frame</td>
      <td id="pixels-per-frame">Calculating...</td>
    </tr>
    <tr>
      <td>Pixels per Second</td>
      <td id="pixels-per-second">Calculating...</td>
    </tr>
    <tr>
      <td>Aspect Ratio</td>
      <td id="aspect-ratio">Calculating...</td>
    </tr>
    <tr>
      <td>Screen Resolution</td>
      <td id="resolution">Calculating...</td>
    </tr>
    <tr>
      <td>Scale (System)</td>
      <td id="scale">Calculating...</td>
    </tr>
    <tr>
      <td>Screen Orientation</td>
      <td id="orientation">Calculating...</td>
    </tr>
    <tr>
      <td>Bit Depth (bpc)</td>
      <td id="bit-depth">Calculating...</td>
    </tr>
    <tr>
      <td>Color Space</td>
      <td id="color-space">Calculating...</td>
    </tr>
  </table>

  <div id="footer">
    ¬© 2025 Luiz Bizzio. All rights reserved.
  </div>

  <script>
    (function screenAndSystemDetails() {
      const fpsElement             = document.getElementById('fps');
      const frameDurationElement   = document.getElementById('frame-duration');
      const refreshRateElement     = document.getElementById('refresh-rate');
      const pixelsPerFrameElement  = document.getElementById('pixels-per-frame');
      const pixelsPerSecondElement = document.getElementById('pixels-per-second');
      const aspectRatioElement     = document.getElementById('aspect-ratio');
      const resolutionElement      = document.getElementById('resolution');
      const scaleElement           = document.getElementById('scale');
      const orientationElement     = document.getElementById('orientation');
      const warningElement         = document.getElementById('warning');
      const fullscreenButton       = document.getElementById('fullscreen-button');
      const backgroundColorPicker  = document.getElementById('background-color');
      const decimalPlacesSelector  = document.getElementById('decimal-places');
      const updateIntervalSelector = document.getElementById('update-interval');

      const bitDepthElement = document.getElementById('bit-depth');
      const colorSpaceElement = document.getElementById('color-space');

      const animationSquare   = document.getElementById('animation-square');
      const animationTriangle = document.getElementById('animation-triangle');
      const animationRect     = document.getElementById('animation-rectangle');
      const animationPulse    = document.getElementById('animation-pulse');
      const animationColor    = document.getElementById('animation-color');

      const oneMsContainer = document.getElementById('one-ms-container');
      const oneMsBall = document.getElementById('one-ms-ball');
      const ghostCountElem = document.getElementById('ghost-count');


      let ghostLifetime = parseInt(updateIntervalSelector.value, 10);
      let duration = parseInt(updateIntervalSelector.value, 10);
      let ghostCount = -1; 

      let startTime = null;

      let distance = oneMsContainer.clientWidth - oneMsBall.clientWidth;

      function animateBall(timestamp) {
        if (!startTime) startTime = timestamp;
        const elapsed = timestamp - startTime;

        let progress = elapsed / duration;
        if (progress > 1) progress = 1;

        const currentX = progress * distance;
        oneMsBall.style.transform = `translateX(${currentX}px)`;

        createGhostBall(currentX);

        if (progress < 1) {
          window.requestAnimationFrame(animateBall);
        } else {
          startTime = null;
          window.requestAnimationFrame(animateBall);
        }
      }

    function createGhostBall(xPos) {
      const ghost = document.createElement('div');
      ghost.className = 'ghost-ball';
      ghost.style.top = oneMsBall.style.top || 'calc(50% - 25px)';
      ghost.style.left = `${xPos}px`;
      oneMsContainer.appendChild(ghost);
      ghostCount++;
      updateGhostCount();
    
      requestAnimationFrame(() => {
        ghost.style.opacity = '0';
      });
    
      setTimeout(() => {
        ghost.remove();
        ghostCount--;
        updateGhostCount();
      }, ghostLifetime);
    }

      function updateGhostCount() {
        ghostCountElem.textContent = `üëª Ghost Count: ${ghostCount}`;
      }

      const aspectRatios = {
        "4:3"   : 4 / 3,
        "16:10" : 16 / 10,
        "16:9"  : 16 / 9,
        "21:9"  : 21 / 9,
        "32:9"  : 32 / 9,
        "5:4"   : 5 / 4,
        "3:2"   : 3 / 2,
        "2:1"   : 2 / 1,
      };

      let updateInterval = parseInt(updateIntervalSelector.value, 10);

      updateIntervalSelector.addEventListener('change', (event) => {
        updateInterval = parseInt(event.target.value, 10);
        ghostLifetime = updateInterval;
        duration = updateInterval;
        startTime = null;
      });

      function findClosestAspectRatio(ratio, width, height) {
        let closestRatio = null;
        let smallestDiff = Infinity;
        for (const [key, value] of Object.entries(aspectRatios)) {
          const diff = Math.abs(value - ratio);
          if (diff < smallestDiff) {
            closestRatio = key;
            smallestDiff = diff;
          }
        }
        return (smallestDiff < 0.01) ? closestRatio : `${width}:${height}`;
      }

      function updateScreenDetails() {
        const width  = screen.width * window.devicePixelRatio;
        const height = screen.height * window.devicePixelRatio;
        const scale  = window.devicePixelRatio * 100;

        let currentOrientation = "Unknown";
        if (screen.orientation && screen.orientation.type) {
          currentOrientation = screen.orientation.type.includes('landscape')
            ? 'Landscape'
            : 'Portrait';
        }

        const ratio       = width / height;
        const aspectRatio = findClosestAspectRatio(ratio, width, height);

        resolutionElement.textContent  = `${width.toFixed(0)} x ${height.toFixed(0)} px`;
        scaleElement.textContent       = `${scale.toFixed(0)}%`;
        orientationElement.textContent = currentOrientation;
        aspectRatioElement.textContent = aspectRatio;

        const isPrimaryMonitor = (
          window.screenX >= 0 &&
          window.screenY >= 0 &&
          screen.availWidth === screen.width
        );
        warningElement.style.display = isPrimaryMonitor ? 'none' : 'block';

        const cDepthTotal = screen.colorDepth;
        let bitsPerChannel = cDepthTotal / 3;
        bitsPerChannel = Math.round(bitsPerChannel * 100) / 100;
        bitDepthElement.textContent = bitsPerChannel + '-bit';

        let colorSpaceDetected = 'Unknown';
        if (window.matchMedia) {
          if (window.matchMedia('(dynamic-range: high)').matches) {
            colorSpaceDetected = 'HDR';
          } else if (window.matchMedia('(dynamic-range: standard)').matches) {
            colorSpaceDetected = 'SDR';
          }
        }
        colorSpaceElement.textContent = colorSpaceDetected;

        return isPrimaryMonitor;
      }

      let frameTimes = [];
      let fpsFrameCount = 0;
      let fpsStartTime = performance.now();
      let lastUpdate = 0;

      function calculatePerformanceMetrics(timestamp) {
        const isPrimaryMonitor = updateScreenDetails();

        if (!isPrimaryMonitor) {
          fpsElement.textContent             = 'Canceled';
          frameDurationElement.textContent   = 'Canceled';
          refreshRateElement.textContent     = 'Canceled';
          pixelsPerFrameElement.textContent  = 'Canceled';
          pixelsPerSecondElement.textContent = 'Canceled';
        } else {
          fpsFrameCount++;
          const elapsedTime = timestamp - fpsStartTime;
          if (elapsedTime >= updateInterval) {
            const fps = fpsFrameCount / (elapsedTime / 1000);
            fpsFrameCount = 0;
            fpsStartTime = timestamp;

            fpsElement.textContent =
              `${fps.toFixed(parseInt(decimalPlacesSelector.value, 10))} fps`;

            if (fps > 0) {
              const frameDurationMs = 1000 / fps;
              frameDurationElement.textContent =
                `${frameDurationMs.toFixed(parseInt(decimalPlacesSelector.value, 10))} ms`;
            } else {
              frameDurationElement.textContent = '‚àû';
            }
          }

          frameTimes.push(timestamp);
          if (frameTimes.length > 100) frameTimes.shift();
          const intervals = frameTimes.slice(1).map((t, i) => t - frameTimes[i]);
          const avgInterval = intervals.reduce((a, b) => a + b, 0) / intervals.length;
          const refreshRate = 1000 / avgInterval;

          if (timestamp - lastUpdate >= updateInterval) {
            refreshRateElement.textContent =
              `${refreshRate.toFixed(parseInt(decimalPlacesSelector.value, 10))} Hz`;

            const width = screen.width * window.devicePixelRatio;
            const height = screen.height * window.devicePixelRatio;
            const pixelsPerFrame = width * height;
            const pixelsPerSecond = pixelsPerFrame * refreshRate;

            pixelsPerFrameElement.textContent  = `${pixelsPerFrame.toLocaleString()} px`;
            pixelsPerSecondElement.textContent = `${pixelsPerSecond.toLocaleString()} px/s`;

            const newDuration = (60 / refreshRate).toFixed(2);
            if (newDuration > 0.1 && newDuration < 10 && !isNaN(newDuration)) {
              animationSquare.style.animationDuration   = newDuration + 's';
              animationTriangle.style.animationDuration = newDuration + 's';
              animationRect.style.animationDuration     = newDuration + 's';
              animationPulse.style.animationDuration    = newDuration + 's';
              animationColor.style.animationDuration    = newDuration + 's';
            }
            lastUpdate = timestamp;
          }
        }
        window.requestAnimationFrame(calculatePerformanceMetrics);
      }

    fullscreenButton.addEventListener('click', () => {
      if (!document.fullscreenElement) {
        document.documentElement.requestFullscreen().catch(err => console.error(err));
        fullscreenButton.textContent = 'Exit Fullscreen';
      } else {
        document.exitFullscreen().catch(err => console.error(err));
        fullscreenButton.textContent = 'Enter Fullscreen';
      }
    });

    backgroundColorPicker.addEventListener('input', (event) => {
      document.body.style.background =
        `linear-gradient(to bottom, ${event.target.value}, #1b1b1b)`;
    });

    function restartAnimations() {
      const newDistance = oneMsContainer.clientWidth - oneMsBall.clientWidth;
      if (newDistance !== distance) {
        distance = newDistance;
      }
    
      const animatedElements = [
        animationSquare,
        animationTriangle,
        animationRect,
        animationPulse,
        animationColor,
      ];
    
      animatedElements.forEach((element) => {
        if (element) {
          element.style.animation = 'none';
          element.offsetHeight;
          element.style.animation = '';
        }
      });
    
      startTime = null;
    }
    
    window.addEventListener('orientationchange', restartAnimations);
    window.addEventListener('resize', restartAnimations);
      
    window.requestAnimationFrame(animateBall);
    window.requestAnimationFrame(calculatePerformanceMetrics);
  })();
</script>
</body>
</html>
